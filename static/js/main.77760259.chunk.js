(this.webpackJsonpsearch=this.webpackJsonpsearch||[]).push([[0],[,,,,,,,,,,,,function(e,t,n){},function(e,t,n){},function(e,t,n){},function(e,t,n){},,function(e,t,n){},function(e,t,n){},function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),c=n(4),r=n.n(c),o=(n(12),n(2)),u=n(5),i=(n(13),n(14),n(15),n(0)),l=function(e){var t=e.name,n=e.nick,a=e.avatar,c=e.onClick,r=s.a.useState(a),u=Object(o.a)(r,2),l=u[0],f=u[1];return function(e){var t=new Image;t.src="".concat(e),t.onload=function(){t.width&&0===t.height&&f("https://bugaga.ru/uploads/posts/2017-03/1489052030_kotik-hosiko-12.jpg")},t.onerror=function(){f("https://bugaga.ru/uploads/posts/2017-03/1489052030_kotik-hosiko-12.jpg")}}(a),Object(i.jsxs)("div",{className:"User",onClick:function(e){c&&c(e,t)},children:[Object(i.jsx)("div",{className:"User__avatar",children:Object(i.jsx)("img",{className:"User__img",src:l,alt:"User avatar"})}),Object(i.jsxs)("div",{className:"User__info",children:[Object(i.jsx)("p",{className:"User__name",children:t}),Object(i.jsx)("p",{className:"User__nick",children:n})]})]})},f=function(e){var t=e.errorMessage,n=e.inputValue,a=e.setInputValue,s=e.willClear,c=e.setWillClear,r=e.users,o=e.isSent,u=e.isLoad,f=function(e,t){e.preventDefault(),a&&a(t),c&&c(!0)},h=u&&r&&r.map((function(e){if(function(e,t){for(var n=!1,a=0;a<e.length;a++)if(e[a].toLowerCase().includes(t.toLowerCase())){n=!0;break}return n}([e.username,e.name],n)){var t="string"===typeof e.photo?e.photo:"https://bugaga.ru/uploads/posts/2017-03/1489052030_kotik-hosiko-12.jpg";return Object(i.jsx)(l,{onClick:f,name:e.name,nick:e.username,avatar:t},e.id)}return null})),p="".concat(t);return Object(i.jsxs)("div",{className:o?"Results Results__preloader":"Results",children:[u&&!s&&!t&&h,!!t&&Object(i.jsx)("p",{className:"Results__error",children:p})]})},h=(n(17),n.p+"static/media/search.273f4b09.svg"),p=function(e){var t=e.setIsSent,n=e.setIsLoad,a=e.setWillClear,s=e.setInputValue,c=e.inputValue;return Object(i.jsxs)("form",{className:"Bar",onSubmit:function(e){e.preventDefault()},children:[Object(i.jsx)("button",{type:"submit",className:"Bar__submit",children:Object(i.jsx)("img",{className:"Bar__icon",src:h,alt:"search icon"})}),Object(i.jsx)("input",{value:c,autoComplete:"off",onFocus:function(){t&&t(!0),n&&n(!1),a&&a(!1)},onInput:function(e){!function(e){var c=e.currentTarget.value;t&&t(!0),n&&n(!1),a&&a(!1),s&&s(c)}(e)},name:"text",type:"text",className:"Bar__input",placeholder:"Search"})]})},j=n(6),m=n(7),d=function(){function e(t){Object(j.a)(this,e),this.url=t.url,this.key=t.key}return Object(m.a)(e,[{key:"getLastNews",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=new Date;new Date(Date.parse(n)-864e5*t),new Date(Date.parse(n)-864e5*e);return fetch("".concat(this.url,"top-headlines?country=ru&pageSize=10&apiKey=").concat(this.key)).then((function(e){return e.ok?e.json():Promise.reject(console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}},{key:"getNews",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:6,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=new Date,s=new Date(Date.parse(a)-864e5*n),c=new Date(Date.parse(a)-864e5*t);return fetch("".concat(this.url,"everything?q=").concat(e,"&from=").concat(s.getFullYear(),"-").concat(s.getMonth()+1,"-").concat(s.getDate(),"&to=").concat(c.getFullYear(),"-").concat(c.getMonth()+1,"-").concat(c.getDate(),"&sortBy=publishedAt&pageSize=100&apiKey=").concat(this.key)).then((function(e){return e.ok?e.json():Promise.reject(console.log("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status)))}))}}]),e}(),g=function(e){Object(u.a)(e);var t=s.a.useState(!1),n=Object(o.a)(t,2),a=n[0],c=n[1],r=s.a.useState(!1),l=Object(o.a)(r,2),h=l[0],j=l[1],m=s.a.useState([]),g=Object(o.a)(m,2),b=g[0],v=g[1],O=s.a.useState(!1),k=Object(o.a)(O,2),_=k[0],x=k[1],w=s.a.useState(""),S=Object(o.a)(w,2),y=S[0],N=S[1],C=s.a.useState(""),D=Object(o.a)(C,2),I=D[0],L=D[1],T=new d({url:"https://nomoreparties.co/news/v2/",key:"2356832b0876432c8814987efd07620a"});return s.a.useEffect((function(){var e=function(e){e.target instanceof HTMLElement&&!e.target.closest(".Search")&&x(!0)};return document.body.addEventListener("click",(function(t){return e(t)})),function(){return document.body.removeEventListener("click",(function(t){return e(t)}))}}),[]),s.a.useEffect((function(){a&&(""===y?T.getLastNews().then((function(e){var t=e.articles.map((function(e,t){return{id:t,name:e.title,username:e.source.name,photo:e.urlToImage}}));return v(t),t})).then((function(e){setTimeout((function(){c(!1),j(!0)}),100)})).catch((function(e){return L(e)})):T.getNews(y).then((function(e){var t=e.articles.map((function(e,t){return{id:t,name:e.title,username:e.source.name,photo:e.urlToImage}}));return v(t),t})).then((function(e){setTimeout((function(){c(!1),j(!0)}),100)})).catch((function(e){return L(e)})))}),[a]),Object(i.jsxs)("div",{className:"Search",children:[Object(i.jsx)(p,{setIsSent:c,setIsLoad:j,setWillClear:x,setInputValue:N,inputValue:y}),Object(i.jsx)(f,{errorMessage:I,inputValue:y,setInputValue:N,willClear:_,setWillClear:x,users:b,isSent:a,isLoad:h})]})},b=(n(18),function(){return Object(i.jsx)("div",{className:"App",children:Object(i.jsx)(g,{})})}),v=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,20)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,c=t.getLCP,r=t.getTTFB;n(e),a(e),s(e),c(e),r(e)}))};r.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(b,{})}),document.getElementById("root")),v()}],[[19,1,2]]]);
//# sourceMappingURL=main.77760259.chunk.js.map